ConcurrentHashMap底层原理是什么？
数据结构方面
1.7是分段的数组+链表
segment数组充当锁的角色
segment包含hashentry数组
1.8是数组+链表/红黑树
锁方面
1.7是对桶数组进行分割，每把锁锁一部分数据默认分配16个段
1.8并发控制使用syschronized和cas操作 
只锁定当前链表或者红黑二叉树的首节点
扩容方面
数组长度大于等于负载因子*数组长度扩展一倍
链表转红黑树
如果当前数组的长度小于64优先进行数组扩容
大于等于64且链表长度达到8个，转化为红黑树
微信公众号关注科技青莲获取面试资料
玩梦幻咯

