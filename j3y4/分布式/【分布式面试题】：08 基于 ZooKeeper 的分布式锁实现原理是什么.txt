【分布式面试题】：08 基于 ZooKeeper 的分布式锁实现原理是什么
ZooKeeper 分布式锁是基于 临时顺序节点 和 Watcher（事件监听器） 实现的。
首先我们要有一个持久节点/locks，客户端获取锁就是在locks下创建临时顺序节点。
假设客户端 1 创建了/locks/lock1节点，创建成功之后，会判断 lock1是否是 /locks 下最小的子节点。
如果 lock1是最小的子节点，则获取锁成功。否则，获取锁失败。
如果获取锁失败，则说明有其他的客户端已经成功获取锁。
客户端 1 并不会不停地循环去尝试加锁，而是在前一个节点比如/locks/lock0上注册一个事件监听器。
这个监听器的作用是当前一个节点释放锁之后通知客户端 1（避免无效自旋），
这样客户端 1 就加锁成功了。
微信公众号关注科技青莲获取面试资料
