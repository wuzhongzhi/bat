【Redis面试题】：lua脚本是怎么执行的
客户端发送一个LUA SCRIPT命令，其中包含需要执行的Lua脚本。
Redis服务端接收到LUA SCRIPT命令后，会将脚本缓存起来，以便在后续的执行中重复使用。
当需要执行该Lua脚本时，客户端发送一个EVAL命令，
其中包含脚本的SHA1摘要（即脚本的唯一标识符）和需要传递给脚本的参数。
Redis服务端根据SHA1摘要查找已经缓存的Lua脚本，如果找到了则直接执行该脚本；
否则先将该脚本编译为字节码，然后再执行。
在执行脚本时，Redis会创建一个Lua解释器的上下文，
并将需要传递给脚本的参数和Redis提供的一些API（如获取键值、修改键值等）注入到该上下文中。
脚本执行完毕后，Redis会将执行结果返回给客户端。
需要注意的是，Lua脚本在执行时是原子性的，即在执行过程中要么成功要么失败
微信公众号关注科技青莲获取面试资料
